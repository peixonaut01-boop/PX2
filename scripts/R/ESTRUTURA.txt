â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ğŸ“Š ESTRUTURA R - PX ECONOMICS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“ scripts/R/
â”‚
â”œâ”€â”€ ğŸš€ INICIO_AQUI.R          â† COMECE AQUI! Menu interativo
â”œâ”€â”€ ğŸ“– README_R.md            â† DocumentaÃ§Ã£o completa
â”œâ”€â”€ ğŸŒ³ ESTRUTURA.txt          â† Este arquivo
â”‚
â”œâ”€â”€ âš™ï¸  CONFIGURAÃ‡ÃƒO
â”‚   â”œâ”€â”€ config.R              â† Paths e configuraÃ§Ãµes
â”‚   â””â”€â”€ utils.R               â† FunÃ§Ãµes Ãºteis
â”‚
â”œâ”€â”€ ğŸ“ TEMPLATES (Copie e edite)
â”‚   â””â”€â”€ templates/
â”‚       â””â”€â”€ template_simples.R    â† Template bÃ¡sico para novos indicadores
â”‚
â”œâ”€â”€ ğŸ”„ WORKFLOWS (Exemplos prontos)
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ exemplo_completo.R    â† 5 exemplos de uso
â”‚
â”œâ”€â”€ ğŸ“Š ATUALIZADORES (Scripts de atualizaÃ§Ã£o)
â”‚   â”œâ”€â”€ ipca_update.R         â† Atualizar IPCA
â”‚   â”œâ”€â”€ ipca15_update.R       â† Atualizar IPCA-15
â”‚   â””â”€â”€ run_all.R             â† Atualizar todos
â”‚
â””â”€â”€ ğŸ“¥ DATA_INPUT (Opcional - coloque seus Excel aqui)
    â””â”€â”€ data_input/

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ¯ FLUXO DE TRABALHO                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1ï¸âƒ£  SETUP INICIAL
    â†“
    source("INICIO_AQUI.R")      # Primeiro uso - verificar tudo
    
2ï¸âƒ£  APRENDER
    â†“
    Ler README_R.md              # DocumentaÃ§Ã£o
    source("workflows/exemplo_completo.R")  # Ver exemplos

3ï¸âƒ£  CRIAR NOVO INDICADOR
    â†“
    file.copy("templates/template_simples.R", "meu_indicador.R")
    # Editar meu_indicador.R (3 seÃ§Ãµes marcadas [EDITAR])
    source("meu_indicador.R")

4ï¸âƒ£  ATUALIZAR DADOS
    â†“
    source("ipca_update.R")      # Atualizar IPCA
    source("ipca15_update.R")    # Atualizar IPCA-15

5ï¸âƒ£  DEPLOY
    â†“
    git add frontend/public/data/*.json
    git commit -m "chore: update data"
    git push origin main

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ğŸ“‹ FUNÃ‡Ã•ES ÃšTEIS DISPONÃVEIS                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“¥ LEITURA
â”œâ”€â”€ read_excel_sheet(file, sheet, day=1)     # Ler Excel e formatar datas
â”œâ”€â”€ format_date_for_json(dates, day=1)       # Formatar datas
â””â”€â”€ parse_portuguese_date("janeiro 2024")    # Converter datas em PT

ğŸ§¹ LIMPEZA
â”œâ”€â”€ clean_for_json(df)                       # Remover NaN/Inf
â””â”€â”€ df_to_records(df)                        # DataFrame â†’ Lista JSON

ğŸ’¾ SALVAR
â””â”€â”€ save_indicator_json(data, path, name, desc)  # Salvar JSON completo

ğŸ” UTILITÃRIOS
â”œâ”€â”€ resumo_df(df)                            # Ver resumo de DataFrame
â”œâ”€â”€ verificar_atualizacao(json_path)         # Verificar Ãºltima atualizaÃ§Ã£o
â”œâ”€â”€ listar_jsons()                           # Listar todos os JSONs
â”œâ”€â”€ preview_json(json_path)                  # Ver preview do JSON
â””â”€â”€ validate_json_structure(data)            # Validar estrutura

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸ“Š FORMATO DO JSON                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

{
  "mom": [                          â† VariaÃ§Ã£o mensal
    {
      "data_date": "2024-01-01",
      "Indicador_1": 0.5,
      "Indicador_2": 1.2
    }
  ],
  "a12": [                          â† Acumulado 12 meses
    {
      "data_date": "2024-01-01",
      "Indicador_1": 4.5,
      "Indicador_2": 5.8
    }
  ],
  "metadata": {                     â† Metadados (gerado automaticamente)
    "indicator": "MEU_INDICADOR",
    "description": "DescriÃ§Ã£o",
    "source": "IBGE/Sidra",
    "last_updated": "2024-12-10T14:30:00",
    "frequency": "monthly"
  }
}

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ğŸ“ EXEMPLOS RÃPIDOS                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Exemplo 1: Ler e ver dados
arquivo <- file.path(INPUT_DIR, "IPCA", "nucleos_ipca_completo.xlsx")
dados <- read_excel_sheet(arquivo, "MoM", day = 1)
resumo_df(dados)

# Exemplo 2: Processar e salvar
dados_mom <- read_excel_sheet(arquivo, "MoM", day = 1)
dados_a12 <- read_excel_sheet(arquivo, "Acumulado_12m", day = 1)

estrutura <- list(
  mom = df_to_records(dados_mom),
  a12 = df_to_records(dados_a12)
)

save_indicator_json(
  estrutura, 
  file.path(OUTPUT_DIR, "meu_ind.json"),
  "MEU_IND", 
  "Meu Indicador"
)

# Exemplo 3: Ver resultado
preview_json(file.path(OUTPUT_DIR, "meu_ind.json"))

# Exemplo 4: Listar todos os JSONs
listar_jsons()

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ”§ CONFIGURAÃ‡Ã•ES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Edite config.R para personalizar:

OUTPUT_DIR â† Onde os JSONs sÃ£o salvos
  â””â”€ PadrÃ£o: C:/Users/Lucas/Desktop/PX2/frontend/public/data

INPUT_DIR â† Onde estÃ£o seus arquivos Excel
  â””â”€ PadrÃ£o: C:/Users/Lucas/Desktop/reports PX/all data

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      âš¡ COMANDOS RÃPIDOS                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

# Setup inicial
source("INICIO_AQUI.R")

# Atualizar IPCA
source("ipca_update.R")

# Criar novo indicador
file.copy("templates/template_simples.R", "novo.R")

# Ver exemplos
source("workflows/exemplo_completo.R"); menu_exemplos()

# Listar JSONs
source("config.R"); source("utils.R"); listar_jsons()

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ğŸ’¡ DICAS E BOAS PRÃTICAS                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… SEMPRE use read_excel_sheet() para ler Excel
   â†’ Formata datas automaticamente
   â†’ Padroniza coluna data_date
   â†’ Mostra mensagens Ãºteis

âœ… SEMPRE use clean_for_json() antes de salvar
   â†’ Remove NaN e Inf
   â†’ Evita erros no JSON

âœ… SEMPRE valide seus dados
   â†’ Use resumo_df() para ver estrutura
   â†’ Use preview_json() para verificar resultado

âœ… Nomeie suas sheets de forma clara
   â†’ "MoM" para variaÃ§Ã£o mensal
   â†’ "Acumulado_12m" para acumulado
   â†’ "Pesos" para pesos

âœ… Mantenha estrutura consistente
   â†’ Primeira coluna sempre Data
   â†’ Demais colunas sempre numÃ©ricas
   â†’ Nomes de colunas claros

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ğŸ› TROUBLESHOOTING                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âŒ Erro: "Arquivo nÃ£o encontrado"
   â†’ Verifique caminho em config.R
   â†’ Use file.exists() para testar

âŒ Erro: "Sheet nÃ£o encontrada"
   â†’ Use excel_sheets(arquivo) para ver sheets disponÃ­veis
   â†’ Verifique nome exato (case-sensitive)

âŒ JSON com valores NULL
   â†’ Use clean_for_json() antes de converter
   â†’ Verifique se dados originais estÃ£o corretos

âŒ Erro: "Coluna data_date nÃ£o encontrada"
   â†’ Certifique-se que primeira coluna tem Data
   â†’ Ou use read_excel_sheet() que formata automaticamente

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            ğŸ“ AJUDA                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“– DocumentaÃ§Ã£o Completa:  README_R.md
ğŸš€ InÃ­cio RÃ¡pido:          INICIO_AQUI.R
ğŸ“ Exemplos:               workflows/exemplo_completo.R
ğŸ“ Template:               templates/template_simples.R

Ãšltima atualizaÃ§Ã£o: Dezembro 2024

